{% extends 'savvy/index.html' %}

{% block main_content %}
<div id="invite-div" class="admin-div">
  <p class="title">Invitation</p>
  <div>
      <ul class="nav nav-pills primary">
          <li class="active">
              <a href="#pending" data-toggle="tab">Pending</a>
          </li>
          <li>
              <a href="#accepted" data-toggle="tab">Accepted</a>
          </li>
      </ul>

      <div class="tab-content clearfix">
          <div class="tab-pane fade in active" id="pending">
              <div class="header">
                  <div>
                      <span class="futura-medium" style="font-size: 22px;">Pending Invitation(1)</span>
                      <a data-toggle="modal" href="#invite-index-modal"><button class="savvy-btn savvy-submit-btn pull-right" id="invite-btn">Invite Member</button></a>
                  </div>
                  <div style="clear:both;"></div><p/>
                  <p class="description">
                      Groups are how you define what users can and cannot see. User group can have access to single or multiple saved filters
                  </p>
              </div>
              <div class="content">
                  <div class="search-bar">
{#                      <div class="input-group transparent pull-left">#}
{#                          <span class="input-group-addon">#}
{#                              <i class="fas fa-search"></i>#}
{#                          </span>#}
{#                          <input class="form-control transparent" type="text" placeholder="Search NMI's">#}
{#                      </div>#}
                      <div class="btn-group pull-right">
                          <div class="dropdown">
                              <button id="group-filter" class="savvy-btn savvy-default-btn dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                  <i class="	fa fa-sliders"></i>
                                  <span>Filter</span>
                                  <span class="caret"></span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-right animated fadeIn" role="menu" aria-labelledby="group-filter">
                                  <li style="font-size: 15px;">
                                      <span class="futura-medium">Filter by</span>
                                      <span class="pull-right"><a href="#" style="color: #34495E;">Reset Filters</a></span>
                                  </li>
                                  <li class="divider"></li>
                                  <li><p>Meter Status</p></li>
                                  <li role="presentation">
                                      <div class="checkbox">
                                          <label><input type="checkbox" value="">Active</label>
                                      </div>
                                  </li>
                                  <li role="presentation">
                                      <div class="checkbox">
                                          <label><input type="checkbox" value="">Inactive</label>
                                      </div>
                                  </li>
                                  <li class="divider"></li>
                              </ul>
                          </div>
                      </div>
                      <div class="clearfix"></div>
                  </div>
                  <div class="invited-users">
                      <table class="table table-striped dataTable user" id="pending-invite-table" width="100%">
                          <thead>
                              <tr>
                              <th></th>
                              <th></th>
                              <th></th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr>
                                  <td class="col-sm-5">
                                      <span class="username">James</span><br/>
                                      <span class="email">James@wayne.com</span><p/>
                                      <div class="button-div hide">
                                          <button class="savvy-btn savvy-default-btn">Revoke</button>
                                          <button class="savvy-btn savvy-default-btn">Re-send</button>
                                      </div>
                                  </td>
                                  <td class="invite-date col-sm-4">
                                      1/21/19
                                  </td>
                                  <td>
                                      <div class="col-sm-10">
                                          <div>Invited by</div>
                                          <span class="owner">Bruce Wayne</span>
                                      </div>
                                      <div class="pull-right">
                                          <a href="#" onclick="toggleButtons(event);">
                                              <i class="fas fa-caret-right"></i>
                                              <i class="fas fa-caret-down hide"></i>
                                          </a>
                                      </div>
                                  </td>
                              </tr>
                          </tbody>
                      </table>
                  </div>
              </div>
          </div>
          <div class="tab-pane fade" id="accepted">
              <div class="header">
                  <div>
                      <span class="futura-medium" style="font-size: 22px;">Accepted Invitation(4)</span>
                    <a data-toggle="modal" href="#invite-index-modal"><button class="savvy-btn savvy-submit-btn pull-right">Invite Member</button></a>
                  </div>
                  <div style="clear:both;"></div><p/>
                  <p class="description">
                      Groups are how you define what users can and cannot see. User group can have access to single or multiple saved filters
                  </p>
              </div>
              <div class="content">
                  <div class="search-bar">
{#                      <div class="input-group transparent pull-left">#}
{#                          <span class="input-group-addon">#}
{#                              <i class="fas fa-search"></i>#}
{#                          </span>#}
{#                          <input class="form-control transparent" type="text" placeholder="Search NMI's">#}
{#                      </div>#}
                      <div class="btn-group pull-right">
                          <div class="dropdown">
                              <button id="group-filter" class="savvy-btn savvy-default-btn dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                  <i class="	fa fa-sliders"></i>
                                  <span>Filter</span>
                                  <span class="caret"></span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-right animated fadeIn" role="menu" aria-labelledby="group-filter">
                                  <li style="font-size: 15px;">
                                      <span class="futura-medium">Filter by</span>
                                      <span class="pull-right"><a href="#" style="color: #34495E;">Reset Filters</a></span>
                                  </li>
                                  <li class="divider"></li>
                                  <li><p>Meter Status</p></li>
                                  <li role="presentation">
                                      <div class="checkbox">
                                          <label><input type="checkbox" value="">Owner</label>
                                      </div>
                                  </li>
                                  <li role="presentation">
                                      <div class="checkbox">
                                          <label><input type="checkbox" value="">Super User</label>
                                      </div>
                                  </li>
                                  <li role="presentation">
                                      <div class="checkbox">
                                          <label><input type="checkbox" value="">Standard</label>
                                      </div>
                                  </li>
                                  <li role="presentation">
                                      <div class="checkbox">
                                          <label><input type="checkbox" value="">Viewer</label>
                                      </div>
                                  </li>
                                  <li class="divider"></li>
                              </ul>
                          </div>
                      </div>
                      <div class="clearfix"></div>
                  </div>
                  <div class="invited-users">
                      <table class="table table-striped dataTable user" id="accepted-invite-table" width="100%">
                          <thead>
                              <tr>
                                  <th></th>
                                  <th></th>
                                  <th></th>
                              </tr>
                          </thead>
                          <tbody>
                              {% for invite in pending_invites  %}
                              <tr>
                                  <td class="col-sm-5">
                                      <span class="username">{{ invite.fullname }}</span><br/>
                                      <span class="email">{{ invite.email }}</span><p/>
                                      <div class="button-div hide">
                                          <button class="savvy-btn savvy-default-btn">Revoke</button>
                                          <button class="savvy-btn savvy-default-btn">Re-send</button>
                                      </div>
                                  </td>
                                  <td class="invite-date col-sm-4">
                                      {{ invite.invite_date }}
                                  </td>
                                  <td>
                                      <div class="col-sm-10">
                                          <div>Invited by</div>
                                          <span class="owner">{{ invite.inviter }}</span>
                                      </div>
                                      <div class="pull-right">
                                          <a href="#" onclick="toggleButtons(event);">
                                              <i class="fas fa-caret-right"></i>
                                              <i class="fas fa-caret-down hide"></i>
                                          </a>
                                      </div>
                                  </td>
                              </tr>
                              {% endfor %}
                          </tbody>
                      </table>
                  </div>
              </div>
        </div>
    </div>
  </div>
</div>
{% endblock %}

{% block dialogs %}
    {% include 'savvy/modals/invite/index_modal.html' %}
    {% include 'savvy/modals/invite/invite_user.html' %}
    {% include 'savvy/modals/invite/invite_done.html' %}
    {% include 'savvy/modals/invite/bulk_invite.html' %}
{% endblock %}

{% block css_import %}
    {{ super() }}
    <link href="{{ url_for('static', filename='assets/savvybi/plugins/datatables/css/jquery.dataTables.css') }}" rel="stylesheet" type="text/css" media="screen"/>
{% endblock %}

{% block js_import %}
    {{ super() }}
    <script src="{{ url_for('static', filename='assets/savvybi/plugins/datatables/js/jquery.dataTables.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/savvybi/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/savvybi/plugins/datatables/extensions/Responsive/js/dataTables.responsive.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/savvybi/plugins/datatables/extensions/Responsive/bootstrap/3/dataTables.bootstrap.js') }}" type="text/javascript"></script>
    <script>
        function toggleButtons(e){
            var _this = $(e.target).parent('a');
            _this.children('i').toggleClass('hide');
            _this.parent('div').parent('td').siblings('td').children('.button-div').toggleClass('hide');
        }
    </script>
{% endblock %}
